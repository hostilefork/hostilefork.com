Draem/Comment [
    slug: %lost-focus-placeholder
    author: "hostilefork"
    date: 8-Dec-2007/15:15
    old-url: http://hostilefork.com/2007/11/25/lost-focus-placeholder/#comment-33
]

[{pete&#8211; you are quite right to say that the worse case and where this really becomes important are when other apps steal the focus without user initiation.  Unfortunately that is hard to choreograph when producing a video like this one, it was just easier to hit alt-tab.  Whether you think suspending your own operation is an interesting example or not, a behavior has to be <i>defined</i> for that case...and as I point out I don't think committing or throwing away are good answers.  So it's not an *entirely* frivolous case, even if it's not the most important one.  Same code either way.
The real truth of the matter with this feature (and how I came up with the idea) is that it sort of "fell out" of a design which I had created for other good reasons.  If you check out my post on undo/redo tied to a single operation you'll get an idea of what those "synergistic" motivations are.  I already had to create an object that holds state for a mouse operation in progress until the button is released, and the moment of release is when the object is finally given the necessary privileges to edit the document and add items to the undo/redo queue.  That mouse object is really what makes this an easy feature to implement:
<a href="http://blog.hostilefork.com/undo-single-user-event/">http://hostilefork.com/2007/11/25/undo-single-user-event/</a>
In terms of OS support for stopping focus stealing: Windows did add an interesting feature, which was to "flash" the task bar icon rather than allow the focus to be stolen, but it seems to only work in a few situations.  Some of the remaining offenders are message boxes coming from OLE DLLs or other random pieces of the OS or its extensions. :-(  I agree that it would be ideal if there was no API giving apps the power to jump to the front of the screen without user initiation, but it's kind of a fact of life, until we can edit the code for the shell.}]